
input {
    pipeline { address => amazones_output }
}


# the block below is disabled. it should be enabled and used in conjunction with the input's [@metadata][iv] if we want to keep indices versioned
# filter {
#   mutate {
#         gsub => [
#           "[@metadata][output]", "log_", "log_%{[@metadata][iv]}_"
#         ]
#       }
# }

output {
    amazon_es {
        hosts => ["${AMAZON_ES_HOST}"]
        index =>  "%{[@metadata][output]}"
        region => "${AMAZON_ES_REGION}" #need to turn this into a variable
        # >>>>>>>>> aws_access_key_id and aws_secret_access_key are optional if instance profile is configured <<<<<<<
        # aws_access_key_id => 'ACCESS_KEY'
        # aws_secret_access_key => 'SECRET_KEY'
        # >>>>>>>>> user and password are optional if instance profile is configured OR aws access/secret is provided <<<<<<<
        # user => "userhere"
        # password => "typepasswordhere"
    }
}